<html>
<head>
<title>ILLiad - Edit Book Request</title>
<link rel="stylesheet" type="text/css" href="css/main.css" media="screen" />
<link rel="stylesheet" type="text/css" href="css/print.css" media="print" />
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.js"></script>
<script type="text/javascript" src="js/DocDeliveryFunctions.js"></script>
<!--[if lte IE 6]>
<link rel="stylesheet" type="text/css" href="css/ie6_or_less.css" />
<![endif]-->
</head>
<body id="type-b">
<div id="wrap">
    <#INCLUDE filename="include_header_request.html">
    <div id="content-wrap">
		<#INCLUDE filename="include_menu.html">
        <div id="content" style="display: none;">
            <form action="illiad.dll" id="EditLoanRequest" method="post" name="EditLoanRequest" class="f-wrap-request">
                <input type="hidden" name="ILLiadForm" value="EditLoanRequest">
                <input type="hidden" name="Username" value="<#PARAM name="Username">">
                <input type="hidden" name="SessionID" value="<#PARAM name="SessionID">">
			<input type="hidden" name="TransactionNumber" value="<#PARAM name="TransactionNumber">">
                <div class="req"><b>*</b> Indicates required field</div>
                <fieldset>
                	<h3 id="pageHeader">Edit Loan Request (Including Multimedia)</h3>
					<#STATUS>
                	<h2>Describe the item you want</h2>
                	<label style="display: none;" for="itemInfo2">
										<span class="field">
										<span>
											<b>Serial loan request</b><br>
											<span class="note">Indicate if you would like to make a loan request for a serial. </span>
										</span>
										</span>
                		<select id="itemInfo2" name="itemInfo2">
										  <option selected><#PARAM name="ItemInfo2"></option>
											<option>Yes</option>
											<option>No</option>
										</select><br />
               	 </label>
									
									
                	<label for="LoanAuthor">
						<span class="field">
                			<span class="req">*</span>
							<span class="<#ERROR name="ERRORLoanAuthor">"><b>Author/Editors</b></span>
						</span>
                		<input id="LoanAuthor" name="LoanAuthor" type="text" size="40" class="f-name"  value="<#PARAM name="LoanAuthor">"><br />
               	</label>
                	
					<label for="LoanTitle">
                		<span class="field">
							<span class="req">*</span>
							<span class="<#ERROR name="ERRORLoanTitle">"><b>Title</b></span><br />
                			<span class="note">We do not process requests for textbooks.</span>
						</span>
                		<textarea id="LoanTitle" name="LoanTitle" rows="2" cols="40" class="f-name" ><#PARAM name="LoanTitle"></textarea><br />
               	</label>
                	
					<label for="LoanPublisher">
						<span class="field">
                			<span class="<#ERROR name="ERRORLoanPublisher">"><b>Publisher</b></span>
						</span>
                		<input id="LoanPublisher" name="LoanPublisher" type="text" size="40" class="f-name"  value="<#PARAM name="LoanPublisher">"><br />
               	</label>
					
                	<label for="LoanPlace">
						<span class="field">
                			<span class="<#ERROR name="ERRORLoanPlace">"><b>Place of Publication</b></span>
						</span>
                		<input id="LoanPlace" name="LoanPlace" type="text" size="40" class="f-name"  value="<#PARAM name="LoanPlace">"><br />
               	</label>
					
                	<label for="LoanDate">
                		<span class="field">
							<span class="<#ERROR name="ERRORLoanDate">"><b>Date of Publication</b></span>
						</span>
                		<input id="LoanDate" name="LoanDate" type="text" size="40" class="f-name"  value="<#PARAM name="LoanDate">"><br />
               	</label>
                
					<label for="LoanEdition">
						<span class="field">
                			<span class="<#ERROR name="ERRORLoanEdition">"><b>Edition</b></span>
						</span>
                		<input id="LoanEdition" name="LoanEdition" type="text" size="40" class="f-name"  value="<#PARAM name="LoanEdition">"><br />
               	</label>
								
								<!--<label for="PhotoJournalTitle" style="display: none;">
						<span class="field">
							<span class="req">*</span>
							<span class="<#ERROR name="ERRORPhotoJournalTitle">"><b>Title (Journal, Conference Proceedings, Anthology)</b></span><br />
							<span class="note">Please do not abbreviate unless your citation is abbreviated</span>
						</span>
						<textarea id="PhotoJournalTitle" name="PhotoJournalTitle" rows="2" cols="40" class="f-name" ><#PARAM name="PhotoJournalTitle"></textarea><br />
				</label>		-->
						
					<label for="PhotoJournalVolume" style="display: none;">
						<span class="field">
							<span class="<#ERROR name="ERRORPhotoJournalVolume">"><b>Volume</b></span>
						</span>
						<input id="PhotoJournalVolume" name="PhotoJournalVolume" type="text" size="40" class="f-name"  value="<#PARAM name="PhotoJournalVolume">"><br />
				</label>
					
					<label for="PhotoJournalIssue" style="display: none;">
						<span class="field">
							<span class="<#ERROR name="ERRORPhotoJournalIssue">"><b>Issue Number or Designation</b></span>
						</span>
						<input id="PhotoJournalIssue" name="PhotoJournalIssue" type="text" size="40" class="f-name"  value="<#PARAM name="PhotoJournalIssue">"><br />
				</label>

					<label for="PhotoJournalMonth" style="display: none;">
						<span class="field">
							<span class="<#ERROR name="ERRORPhotoJournalMonth">"><b>Month</b></span>
						</span>
						<input id="PhotoJournalMonth" name="PhotoJournalMonth" type="text" size="40" class="f-name"  value="<#PARAM name="PhotoJournalMonth">"><br />
				</label>
					
					<label for="PhotoJournalYear" style="display: none;">
						<span class="field">
							<span class="req">*</span>
							<span class="<#ERROR name="ERRORPhotoJournalYear">"><b>Year</b></span>
						</span>
						<input id="PhotoJournalYear" name="PhotoJournalYear" type="text" size="40" class="f-name"  value="<#PARAM name="PhotoJournalYear">"><br />
				</label>
				
					
					
					
                	<label for="ISSN">
					 	<span class="field">
                			<span class="<#ERROR name="ERRORISSN">"><b>ISSN/ISBN (International Standard Serial/Book Number)</b></span><br />
                		<span class="note">If given will speed request processing</span>
						</span>
                		<input id="ISSN" name="ISSN" type="text" size="20" class="f-name"  value="<#PARAM name="ISSN">"><br />
               	</label>
					
                	<label for="CallNumber">					
						<span class="field">
							<span class="req">*</span>
							<span class="<#ERROR name="ERRORCallNumber">"><b>Call Number</b></span>
						</span>
                		<input id="CallNumber" name="CallNumber" type="text" size="20" class="f-name"  value="<#PARAM name="CallNumber">"><br />
               	</label>
					
                	<label for="ESPNumber">
						<span class="field">
                			<span class="<#ERROR name="ERRORESPNumber">"><b>OCLC or Docline UI Number</b></span>
						</span>
                		<input id="ESPNumber" name="ESPNumber" type="text" size="20" class="f-name"  value="<#PARAM name="ESPNumber">"><br />
               	</label>
					
                	<label for="NotWantedAfter">
						<span class="field">
                			<span class="req">*</span><span class="<#ERROR name="ERRORNotWantedAfter">"><b>Not Wanted After Date</b></span><br />
							<span class="note">(MM/DD/YYYY)</span>
						</span>
                		<input id="NotWantedAfter" name="NotWantedAfter" type="text" size="40" class="f-name"  value="<#PARAM name="NotWantedAfter">"><br />
               	</label>
					
                	<label for="AcceptNonEnglish">
					
						<span class="field">
																		<span class="req" id="AcceptNonEnglishReq">*</span>
                						<span class="<#ERROR name="ERRORAcceptNonEnglish">"><b>Will you accept the item in a language other than English?</b></span><br />
                			<span class="note">If yes, specify acceptable languages in the notes field.</span>
						</span>
                		<select id="AcceptNonEnglish" name="AcceptNonEnglish" size="1" class="f-name" >
                    		<option selected><#PARAM name="AcceptNonEnglish"></option>
                    		<option>No</option>
                    		<option>Yes</option>
                		</select>
						<br />
               	</label>
					
                	<label for="AcceptAlternateEdition">
						<span class="field">
                			<span class="req">*</span>			<span class="<#ERROR name="ERRORAcceptAlternateEdition">"><b>Will you accept an alternate edition of this item?</b></span>
						</span>
                		<select id="AcceptAlternateEdition" name="AcceptAlternateEdition" size="1" class="f-name" >
                    		<option selected><#PARAM name="AcceptAlternateEdition"></option>
                    		<option>No</option>
                    		<option>Yes</option>
                		</select>
                		<br />
               	</label>
			
                	<label for="facOrGrad" style="display: none;">
										<span class="field">
											<span class="req">*</span>
											<b><span id="facOrGradText" class="valid">Status</span></b>
											<br>
											<!--<span id="facOrGradNote" class="note">You must be a faculty member or graduate student to use this service.</span>-->
										</span>
					
										<select id="facOrGrad" name="facOrGrad">
											<option selected></option>
											<option>Faculty</option>
											<option>Graduate student</option>
											<option>Distance student</option>
											<option>Undergraduate</option>
											<option>Other</option>
										</select>
										<br>
									</label>
									
									<label for="itemInfo5">
											<span class="field">
												<b><span id="itemInfo5Text" class="valid">Is this an Annex item?</span></b>
												<br>
												<!--<span id="facOrGradNote" class="note">You must be a faculty member or graduate student to use this service.</span>-->
											</span>
					
											<select id="itemInfo5" name="itemInfo5">
												<option selected><#PARAM name="ItemInfo5"></option>
												<option>Yes</option>
												<option>No</option>
											</select>
											<br>
									</label>
									
									<label for="ItemInfo1" style="display: none;">
														
										<input id="ItemInfo1" name="ItemInfo1" type="text" size="40" class="f-name"  value="<#PARAM name="ItemInfo1">"><br />
										
						</label>
									
									<label for="ItemInfo3" >
									  
										<span class="field"><b>Campus mailbox</b><br>
											
											<span class="note">Faculty may choose to have an item delivered to their campus mailbox.  Expected delivery time is 2-3 days.</span>
										</span>
										<textarea id="ItemInfo3" type="text" name="ItemInfo3" rows="2"><#PARAM name="ItemInfo3"></textarea>
									<br>
									</label>
		
									<label for="ItemInfo4" style="display: none;">									  
										<span class="field">
											<span class="req" id="ItemInfo4Req">*</span>
											<b><span id="ItemInfo4Text" class="valid">Pickup location</span></b>
											<br>
												<span class="note" id="ItemInfo4Note" style="display: none;">Periodical/Serial will be placed on hold at the library where it is shelved.</span>
												<span style="display: none;" class="note" id="ItemInfo4DistanceEdNote">Delivery will be to your address in ILLiad which <em>does not</em> update automatically.  You can check or change this by clicking on <a href="<#ACTION action="10" form="81">">this User Information link</a> or by selecting User Information from the left-hand menu. </span>											
										</span>
					
										<select id="ItemInfo4" name="ItemInfo4">
											<option selected><#PARAM name="ItemInfo4"></option>
											<option>Gorgas</option>
											<option>Rodgers</option>
											<option>Bruno</option>
											<option>McLure</option>
										</select>
										
										
										<br>
										

									</label>
									<!--
										<label for="Address">
											<span class="field">
														<span class="<#ERROR name="ERRORAddress">"><b>Web Services Test -- ignore!</b></span>
											</span>
											<input id="Address" name="Address" type="text" size="40" class="f-name"  value="<#PARAM name="Address">"><br />
										</label>
										<label for="Site">
												<span class="field">
														<b><span class="<#ERROR name="ERRORSite">">Site (temporary Web Serv test)</span></b>
														<br>
												</span>
										   <select id="Site" name="Site" size="1" class="f-name" >
													<#OPTION name="custom" groupname="Site" defaultValue="Gorgas" />
											</select>
										</label>-->
									
									
									
									
                	<label for="Notes">
						<span class="field">
                			<span class="<#ERROR name="ERRORNotes">"><b>Notes</b></span><br />
                			<span class="note" >Put any information here that may help us find the item, as well as any other pertinent information.</span>
						</span>
                		<textarea id="Notes" name="Notes" rows="2" cols="40" class="f-name" ><#PARAM name="Notes"></textarea><br />
               	</label>
								
								
									</label>
									
					
                	<#INCLUDE filename="include_request_cited.html">                
                    <#INCLUDE filename="include_request_buttons.html">
                </fieldset>
						    <script>
								
										
			$(document).ready(function(){
			
				docDeliveryStatus = $('input#ItemInfo1').attr('value');
				 
				if ((docDeliveryStatus == 'DocDelivery') || (docDeliveryStatus == 'DocDeliveryPublic')){		
					docDelivery = true;
					requiredFields = ['LoanTitle', 'LoanAuthor', 'NotWantedAfter', 'facOrGrad', 'AcceptAlternateEdition', 'CallNumber', 'ItemInfo4']; 
					
				}
				else{
					docDelivery = false;
					requiredFields = ['LoanTitle', 'LoanAuthor', 'NotWantedAfter', 'AcceptNonEnglish']; 					
				}
			
				if (docDelivery == true){
					
						$('#requestCited').css('display', 'none');

						//Hide buttons that no longer work
						//$('input[name="ResetButton"]').css('display', 'none');
						$('input[value^="Cancel"]').css('display', 'none');
					
						
						$('#pageHeader').html("Edit Document Delivery - Loan (UA Libraries Collection)");

						$('label[for="facOrGrad"]').css('display', 'block');
						$('label[for="itemInfo2"]').css('display', 'block');
						$('label[for="ItemInfo3"]').css('display', 'block');
						$('label[for="ItemInfo4"]').css('display', 'block');
						$('label[for="itemInfo5"]').css('display', 'block');
						$('label[for="ESPNumber"]').css('display', 'none');
						$('label[for="AcceptNonEnglish"]').css('display', 'none');
						$('#ISSNNote').css('display', 'none');
						
						//The value of fac or grad is not stored, but can be inferred in this case from ItemInfo4 (pickup location) having the value of "Mail to address"
						if ($("#ItemInfo4").val() == 'Mail to address'){
							$("#facOrGrad").val('Distance student');
						}
						
						$('#facOrGrad').change(function(){	
						 $.proxy(facOrGradChange, $('#facOrGrad'))();
						});
						
						//Campus mailbox
						$('#ItemInfo3').change(function(){
							$.proxy(campusMailboxChange, $('#ItemInfo3'))();		
						});
						
						//Pickup library
						$('#ItemInfo4').change(function(){
							$.proxy(pickupLibraryChange, $('#ItemInfo4'))();		;
						});
						
						//Annex request
						$('#itemInfo5').change(function(){
							$.proxy(annexRequestChange, $('#itemInfo5'))();		
						});
						
						//Serial loan request
						$('#itemInfo2').change(function(){
							$.proxy(serialLoanChange, $('#itemInfo2'))();		
						});
							

						//Ensure edit document delivery - loan updates with correct fields 
						$('#itemInfo2').change();
						$('#ItemInfo3').change();
						$('#itemInfo5').change();				
					 }
					 else {
							$('label[for="CallNumber"] span.req').css('display', 'none');
					 }
					$('#EditLoanRequest').submit(function(event){
						//Validate form, etc.
						var returnValue = $.proxy(docDeliverySubmit, $('#LoanRequestForm'))();
						
						//docDeliverySubmit returns false if the form is invalid
						if (returnValue == false){
							console.log("RETURN VALUE IS FALSE!");
							return false;
						}		
					 });
	
					 $('#content').css('display', 'block');

				});																										
					</script>
					<script>
						console.log("VANILLA JS");
						var content = document.querySelector('#content'); 
						content.setAttribute('display', 'block');
					</script>
        </form>
         <#INCLUDE filename="include_footer.html">
        </div>
    </div>
</div>
</body>
</html>
